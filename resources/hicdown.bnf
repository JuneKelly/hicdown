Document = (nl | (dnl)*) Block (dnl Block)* (nl | (dnl)*)
Block = TextContent

spc = #'\s'
dnl = #'\n(\n)+'
nl = !dnl #'\n'

TextContent = (char+ | escape | nl | Segment)+

char = #'[^\n\[\]{}]'

escape = '\\[' | '\\]' | '\\{' | '\\}'

Segment = '[' tag spc+ map? TextContent+ ']'

tag = #':[^\s]*'

map = '{' (key spc+ val)* '}'

key = #':[^\s]+'
val = #'[\w]+'
